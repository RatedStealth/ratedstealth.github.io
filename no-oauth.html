<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alternative Registration</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
        h1 { color: #00AA00; }
        .container { border: 1px solid #ddd; padding: 20px; border-radius: 5px; margin-top: 20px; background-color: #f9f9f9; }
        button { background-color: #4CAF50; color: white; border: none; padding: 10px 15px; 
                 text-align: center; font-size: 16px; border-radius: 4px; cursor: pointer; }
        input, textarea { width: 100%; padding: 8px; margin: 5px 0 15px; border: 1px solid #ddd; border-radius: 4px; }
        .success { background-color: #e8f5e9; padding: 10px; border-left: 4px solid #4CAF50; margin: 15px 0; }
        .info { background-color: #e3f2fd; padding: 10px; border-left: 4px solid #2196F3; margin: 15px 0; }
        .label { font-weight: bold; margin-bottom: 5px; display: block; }
    </style>
</head>
<body>
    <h1>Alternative Streamer Registration</h1>
    
    <div class="info">
        <h3>About this Method</h3>
        <p>Since OAuth authorization with Kick might be restricted, this page offers alternative ways to register as a streamer without OAuth.</p>
    </div>
    
    <div class="container">
        <h2>Option 1: Public API Tracking</h2>
        <p>This method uses Kick's public API to check your stream status without requiring OAuth authorization.</p>
        
        <form id="publicForm">
            <div>
                <label class="label" for="discordId">Your Discord ID:</label>
                <input type="text" id="discordId" placeholder="Enter your Discord user ID (e.g., 1234567890)">
            </div>
            
            <div>
                <label class="label" for="kickUsername">Your Kick Username:</label>
                <input type="text" id="kickUsername" placeholder="Enter your exact Kick username">
            </div>
            
            <div>
                <label class="label" for="discordTag">Your Discord Tag:</label>
                <input type="text" id="discordTag" placeholder="Enter your Discord username (e.g., username#1234)">
            </div>
            
            <button type="button" onclick="savePublicInfo()">Register for Public Tracking</button>
        </form>
        
        <div id="publicResult" style="margin-top: 15px;"></div>
    </div>
    
    <div class="container">
        <h2>Option 2: Manual Verification</h2>
        <p>Verify your Kick channel by adding a specific code to your channel description.</p>
        
        <div style="margin-bottom: 15px;">
            <p>Verification Code to add to your Kick channel description:</p>
            <div style="background-color: #f5f5f5; padding: 10px; border-radius: 4px;">
                <code id="verificationCode">KudosRP-Verify-<span id="randomCode">Loading...</span></code>
                <button onclick="copyVerificationCode()" style="margin-left: 10px;">Copy</button>
            </div>
        </div>
        
        <form id="verificationForm">
            <div>
                <label class="label" for="vDiscordId">Your Discord ID:</label>
                <input type="text" id="vDiscordId" placeholder="Enter your Discord user ID">
            </div>
            
            <div>
                <label class="label" for="vKickUsername">Your Kick Username:</label>
                <input type="text" id="vKickUsername" placeholder="Enter your Kick username">
            </div>
            
            <div>
                <label class="label" for="vDiscordTag">Your Discord Tag:</label>
                <input type="text" id="vDiscordTag" placeholder="Enter your Discord username">
            </div>
            
            <button type="button" onclick="submitVerification()">Submit for Verification</button>
        </form>
        
        <div id="verificationResult" style="margin-top: 15px;"></div>
    </div>
    
    <div class="container">
        <h2>For Server Administrators</h2>
        <p>Server administrators can use these methods to manually track streamers without OAuth:</p>
        <ol>
            <li>Use the <code>/checkstatus</code> command to manually check a streamer's status</li>
            <li>Create a Discord channel where streamers can post when they go live</li>
            <li>Use Public API tracking for basic status checks (no authentication required)</li>
            <li>Set up a webhook from a third-party service that tracks Kick streamers</li>
        </ol>
    </div>
    
    <script>
        // Generate a random verification code
        window.addEventListener('DOMContentLoaded', function() {
            const randomCode = generateRandomCode(8);
            document.getElementById('randomCode').textContent = randomCode;
        });
        
        function generateRandomCode(length) {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }
        
        function copyVerificationCode() {
            const code = document.getElementById('verificationCode').textContent;
            navigator.clipboard.writeText(code)
                .then(() => alert('Verification code copied to clipboard!'))
                .catch(err => alert('Failed to copy code: ' + err));
        }
        
        function savePublicInfo() {
            const discordId = document.getElementById('discordId').value.trim();
            const kickUsername = document.getElementById('kickUsername').value.trim();
            const discordTag = document.getElementById('discordTag').value.trim();
            const resultDiv = document.getElementById('publicResult');
            
            if (!discordId || !kickUsername) {
                resultDiv.innerHTML = `<div style="color: red;">Please fill in all required fields.</div>`;
                return;
            }
            
            // Create registration data
            const registrationData = {
                type: 'public_api',
                discord_id: discordId,
                kick_username: kickUsername,
                discord_tag: discordTag,
                timestamp: new Date().toISOString()
            };
            
            // Save to localStorage
            localStorage.setItem(`streamer_reg_${discordId}`, JSON.stringify(registrationData));
            
            // Create downloadable file
            const dataStr = JSON.stringify(registrationData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const exportFileDefaultName = `streamer_registration_${discordId}.json`;
            
            resultDiv.innerHTML = `
                <div class="success">
                    <h3>Registration Saved!</h3>
                    <p>Your information has been saved. Please download the registration file and send it to a server administrator.</p>
                </div>
                <p><a href="${dataUri}" download="${exportFileDefaultName}" class="button" style="display: inline-block; padding: 8px 15px; background: #4CAF50; color: white; text-decoration: none; border-radius: 4px;">Download Registration File</a></p>
            `;
        }
        
        function submitVerification() {
            const discordId = document.getElementById('vDiscordId').value.trim();
            const kickUsername = document.getElementById('vKickUsername').value.trim();
            const discordTag = document.getElementById('vDiscordTag').value.trim();
            const verificationCode = document.getElementById('verificationCode').textContent;
            const resultDiv = document.getElementById('verificationResult');
            
            if (!discordId || !kickUsername) {
                resultDiv.innerHTML = `<div style="color: red;">Please fill in all required fields.</div>`;
                return;
            }
            
            // Create verification data
            const verificationData = {
                type: 'manual_verification',
                discord_id: discordId,
                kick_username: kickUsername,
                discord_tag: discordTag,
                verification_code: verificationCode,
                timestamp: new Date().toISOString()
            };
            
            // Save to localStorage
            localStorage.setItem(`verification_${discordId}`, JSON.stringify(verificationData));
            
            // Create downloadable file
            const dataStr = JSON.stringify(verificationData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const exportFileDefaultName = `kick_verification_${discordId}.json`;
            
            resultDiv.innerHTML = `
                <div class="success">
                    <h3>Verification Submitted!</h3>
                    <p>Your verification has been submitted. Please download the verification file and send it to a server administrator.</p>
                    <p>Make sure you've added the verification code to your Kick channel description.</p>
                </div>
                <p><a href="${dataUri}" download="${exportFileDefaultName}" class="button" style="display: inline-block; padding: 8px 15px; background: #4CAF50; color: white; text-decoration: none; border-radius: 4px;">Download Verification File</a></p>
            `;
        }
    </script>
</body>
</html> 